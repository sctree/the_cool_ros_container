/* esm.sh - github:jeff-hykin/good-js#f6d5bcb/source/flattened/path_pieces */
var D=46,C=47;function m(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function S(e){if(m(e),e.length===0)return".";let r=e.charCodeAt(0)===C,i=-1,t=!0;for(let f=e.length-1;f>=1;--f)if(e.charCodeAt(f)===C){if(!t){i=f;break}}else t=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)}function E(e,r=""){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');m(e);let i=0,t=-1,f=!0,n;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";let o=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){let s=e.charCodeAt(n);if(s===C){if(!f){i=n+1;break}}else l===-1&&(f=!1,l=n+1),o>=0&&(s===r.charCodeAt(o)?--o===-1&&(t=n):(o=-1,t=l))}return i===t?t=l:t===-1&&(t=e.length),e.slice(i,t)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===C){if(!f){i=n+1;break}}else t===-1&&(f=!1,t=n+1);return t===-1?"":e.slice(i,t)}}function R(e){m(e);let r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;let i=e.charCodeAt(0)===C,t;i?(r.root="/",t=1):t=0;let f=-1,n=0,o=-1,l=!0,s=e.length-1,d=0;for(;s>=t;--s){let u=e.charCodeAt(s);if(u===C){if(!l){n=s+1;break}continue}o===-1&&(l=!1,o=s+1),u===D?f===-1?f=s:d!==1&&(d=1):f!==-1&&(d=-1)}return f===-1||o===-1||d===0||d===1&&f===o-1&&f===n+1?o!==-1&&(n===0&&i?r.base=r.name=e.slice(1,o):r.base=r.name=e.slice(n,o)):(n===0&&i?(r.name=e.slice(1,f),r.base=e.slice(1,o)):(r.name=e.slice(n,f),r.base=e.slice(n,o)),r.ext=e.slice(f,o)),n>0?r.dir=e.slice(0,n-1):i&&(r.dir="/"),r}var h={parse:R,basename:E,dirname:S};function k(e){e=e.path||e;let r=h.parse(e),i=[],t=r.dir;for(;i.push(h.basename(t)),t!=h.dirname(t);)t=h.dirname(t);return i.reverse(),i[0]==""&&(i[0]="/"),[i,r.name,r.ext]}var T=65,_=97,x=90,U=122,I=46,H=47,W=92,b=58;function w(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function N(e){return e===H}function a(e){return N(e)||e===W}function v(e){return e>=_&&e<=U||e>=T&&e<=x}function $(e){w(e);let r=e.length;if(r===0)return".";let i=-1,t=-1,f=!0,n=0,o=e.charCodeAt(0);if(r>1)if(a(o)){if(i=n=1,a(e.charCodeAt(1))){let l=2,s=l;for(;l<r&&!a(e.charCodeAt(l));++l);if(l<r&&l!==s){for(s=l;l<r&&a(e.charCodeAt(l));++l);if(l<r&&l!==s){for(s=l;l<r&&!a(e.charCodeAt(l));++l);if(l===r)return e;l!==s&&(i=n=l+1)}}}}else v(o)&&e.charCodeAt(1)===b&&(i=n=2,r>2&&a(e.charCodeAt(2))&&(i=n=3));else if(a(o))return e;for(let l=r-1;l>=n;--l)if(a(e.charCodeAt(l))){if(!f){t=l;break}}else f=!1;if(t===-1){if(i===-1)return".";t=i}return e.slice(0,t)}function P(e,r=""){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');w(e);let i=0,t=-1,f=!0,n;if(e.length>=2){let o=e.charCodeAt(0);v(o)&&e.charCodeAt(1)===b&&(i=2)}if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";let o=r.length-1,l=-1;for(n=e.length-1;n>=i;--n){let s=e.charCodeAt(n);if(a(s)){if(!f){i=n+1;break}}else l===-1&&(f=!1,l=n+1),o>=0&&(s===r.charCodeAt(o)?--o===-1&&(t=n):(o=-1,t=l))}return i===t?t=l:t===-1&&(t=e.length),e.slice(i,t)}else{for(n=e.length-1;n>=i;--n)if(a(e.charCodeAt(n))){if(!f){i=n+1;break}}else t===-1&&(f=!1,t=n+1);return t===-1?"":e.slice(i,t)}}function y(e){w(e);let r={root:"",dir:"",base:"",ext:"",name:""},i=e.length;if(i===0)return r;let t=0,f=e.charCodeAt(0);if(i>1){if(a(f)){if(t=1,a(e.charCodeAt(1))){let c=2,A=c;for(;c<i&&!a(e.charCodeAt(c));++c);if(c<i&&c!==A){for(A=c;c<i&&a(e.charCodeAt(c));++c);if(c<i&&c!==A){for(A=c;c<i&&!a(e.charCodeAt(c));++c);c===i?t=c:c!==A&&(t=c+1)}}}}else if(v(f)&&e.charCodeAt(1)===b)if(t=2,i>2){if(a(e.charCodeAt(2))){if(i===3)return r.root=r.dir=e,r;t=3}}else return r.root=r.dir=e,r}else if(a(f))return r.root=r.dir=e,r;t>0&&(r.root=e.slice(0,t));let n=-1,o=t,l=-1,s=!0,d=e.length-1,u=0;for(;d>=t;--d){if(f=e.charCodeAt(d),a(f)){if(!s){o=d+1;break}continue}l===-1&&(s=!1,l=d+1),f===I?n===-1?n=d:u!==1&&(u=1):n!==-1&&(u=-1)}return n===-1||l===-1||u===0||u===1&&n===l-1&&n===o+1?l!==-1&&(r.base=r.name=e.slice(o,l)):(r.name=e.slice(o,n),r.base=e.slice(o,l),r.ext=e.slice(n,l)),o>0&&o!==t?r.dir=e.slice(0,o-1):r.dir=r.root,r}var g={parse:y,basename:P,dirname:$};function L(e){e=e.path||e;let r=g.parse(e),i=[],t=r.dir;for(;i.push(g.basename(t)),t!=g.dirname(t);)t=g.dirname(t);return i.reverse(),i[0]==""&&(i[0]="C:\\"),[i,r.name,r.ext]}function K(e,{fsType:r="posix"}={}){if(r=="posix")return k(e);if(r=="windows")return L(e);throw Error(`Unsupported fsType: ${r}, supported values are "posix" and "windows"`)}export{K as pathPieces};
//# sourceMappingURL=path_pieces.mjs.map
// denoCacheMetadata={"headers":{"server":"cloudflare","last-modified":"Fri, 01 Aug 2025 16:04:27 GMT","date":"Fri, 01 Aug 2025 16:18:13 GMT","cf-ray":"9686a6720907f0b4-DFW","age":"825","vary":"Accept-Encoding","cache-control":"public, max-age=31536000, immutable","cf-cache-status":"HIT","alt-svc":"h3=\":443\"; ma=86400","content-type":"application/javascript; charset=utf-8","access-control-allow-origin":"*"},"url":"https://esm.sh/gh/jeff-hykin/good-js@f6d5bcb/denonext/source/flattened/path_pieces.mjs","time":1754065093}